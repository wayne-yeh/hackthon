# TAR DApp - 快速入門指南

## 🚀 快速開始

### 1. 環境準備

確保您的系統已安裝：

- Node.js >= 18.0.0
- npm 或 yarn
- Git

### 2. 安裝和運行

```bash
# 克隆項目（如果尚未克隆）
git clone <repository-url>
cd "5.Frontend DApp"

# 安裝依賴
make install

# 設置環境變量
make setup

# 啟動開發服務器
make dev
```

### 3. 訪問應用

打開瀏覽器訪問：`http://localhost:3000`

## 🔧 配置說明

### 環境變量

編輯 `.env.local` 文件：

```env
# API 配置 - 使用端口 8083
NEXT_PUBLIC_API_BASE_URL=http://localhost:8083

# 發行者令牌（用於發行頁面授權）
NEXT_PUBLIC_ISSUER_TOKEN=change-this-in-production

# WalletConnect 項目 ID
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=your-project-id

# 區塊鏈配置
NEXT_PUBLIC_CHAIN_ID=31337
NEXT_PUBLIC_CONTRACT_ADDRESS=0x5FbDB2315678afecb367f032d93F642f64180aa3
```

### 錢包連接

1. 在 [WalletConnect Cloud](https://cloud.walletconnect.com/) 創建項目
2. 獲取 Project ID
3. 在環境變量中設置 `NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID`

## 📱 使用指南

### 首頁 (/)

- 查看 TAR DApp 功能介紹
- 連接 imToken 或其他支持的錢包
- 快速導航到各個功能頁面

### 發行收據 (/issuer)

**注意**: 此頁面需要授權令牌

1. 確保環境變量中設置了正確的 `NEXT_PUBLIC_ISSUER_TOKEN`
2. 連接錢包
3. 填寫收據信息：
   - 發票號碼
   - 購買日期
   - 金額
   - 商品名稱
   - 擁有者地址
   - 描述（可選）
   - 商品圖片（可選）
4. 點擊"發行收據"

### 驗證收據 (/verify)

1. 輸入 Token ID 和元數據哈希
2. 點擊"驗證收據"
3. 查看驗證結果
4. 生成 QR 碼用於分享

### 我的收據 (/my)

1. 連接錢包
2. 查看擁有的所有收據
3. 切換查看有效/所有收據
4. 點擊驗證或查看詳情

## 🧪 測試

### 單元測試

```bash
# 運行所有測試
make test

# 監聽模式
make test-watch

# 覆蓋率報告
make test-coverage
```

### E2E 測試

```bash
# 運行 E2E 測試
make test-e2e

# UI 模式
make test-e2e-ui
```

## 🐛 常見問題

### 1. 錢包連接失敗

- 檢查 WalletConnect Project ID 是否正確設置
- 確保網絡連接正常
- 嘗試刷新頁面重新連接

### 2. API 請求失敗

- 確認後端服務正在運行（端口 8083）
- 檢查 API 基礎 URL 配置
- 查看瀏覽器控制台錯誤信息

### 3. 發行頁面無法訪問

- 檢查 `NEXT_PUBLIC_ISSUER_TOKEN` 環境變量
- 確保令牌值不是默認的 `change-this-in-production`

### 4. 測試失敗

- 確保所有依賴已安裝：`make install`
- 檢查 Node.js 版本 >= 18.0.0
- 清理並重新安裝：`make clean && make install`

## 🔗 相關服務

確保以下服務正在運行：

- **Backend Core API**: `http://localhost:8083`
- **Metadata Service**: `http://localhost:8081`
- **Verification Service**: `http://localhost:8082`
- **Smart Contract**: 部署在本地 Hardhat 網絡

## 📞 獲取幫助

1. 查看 [README.md](README.md) 獲取詳細文檔
2. 檢查 [Issues](../../issues) 頁面
3. 聯繫開發團隊

## 🚀 部署

### Docker 部署

```bash
# 構建鏡像
make docker-build

# 運行容器
make docker-run
```

### Docker Compose 部署

```bash
# 啟動所有服務
docker-compose up -d
```

訪問：`http://localhost:3000`










